<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="SQL语句" />
    <meta name="hexo-theme-A4" content="v1.9.1" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Dengpangpang</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Dengpangpang</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">🍟首页</a></li>
            
        
            
                <li><a href="/list/">📝文章</a></li>
            
        
            
                <li><a href="/tags/">🏷️标签</a></li>
            
        
            
                <li><a href="/categories/">🗂️分类</a></li>
            
        
            
                <li><a href="/about/">👁️关于</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            SQL语句
        </div>
      
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#SQL%E6%A6%82%E5%BF%B5"><span class="post-toc-text">SQL概念</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DDL%E8%AF%AD%E5%8F%A5"><span class="post-toc-text">DDL语句</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="post-toc-text">数据库操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="post-toc-text">创建数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="post-toc-text">查看数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="post-toc-text">修改数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="post-toc-text">删除数据库</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="post-toc-text">使用数据库</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="post-toc-text">数据库表操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="post-toc-text">创建表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8"><span class="post-toc-text">查看表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="post-toc-text">删除表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="post-toc-text">修改表</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9B%B8%E5%85%B3"><span class="post-toc-text">存储引擎相关</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DML%E8%AF%AD%E5%8F%A5"><span class="post-toc-text">DML语句</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%A1%A8%E8%AE%B0%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="post-toc-text">表记录操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95"><span class="post-toc-text">插入记录</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95"><span class="post-toc-text">更新记录</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%A0%E9%99%A4%E8%AE%B0%E5%BD%95"><span class="post-toc-text">删除记录</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DCL%E8%AF%AD%E5%8F%A5"><span class="post-toc-text">DCL语句</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="post-toc-text">用户管理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="post-toc-text">权限管理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DQL%E8%AF%AD%E5%8F%A5"><span class="post-toc-text">DQL语句</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">记录查询</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">简单查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%AB%E5%90%8D%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">别名查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">去除重复记录查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%BF%90%E7%AE%97%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">运算查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">条件查询</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="post-toc-text">模式匹配</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="post-toc-text">简单模式匹配</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%AD%A3%E5%88%99%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="post-toc-text">正则模式匹配</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%BB%93%E6%9E%9C%E5%A4%84%E7%90%86"><span class="post-toc-text">结果处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="post-toc-text">结果排序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E7%BB%84"><span class="post-toc-text">结果分组</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="post-toc-text">聚合函数</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%86%E9%A1%B5%E5%B1%95%E7%A4%BA"><span class="post-toc-text">分页展示</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">多表连接查询</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="post-toc-text">内连接</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="post-toc-text">外连接</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">SQL子查询</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%8D%95%E8%A1%8C%E5%8D%95%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">单行单列子查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%8D%95%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">多行单列子查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%A4%9A%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="post-toc-text">多行多列子查询</span></a></li></ol></li></ol></li></ol>
            
        
        <link rel="stylesheet" type="text/css" href="https://jsd.cdn.zzko.cn/npm/hexo-theme-a4@latest/source/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="SQL概念"><a href="#SQL概念" class="headerlink" title="SQL概念"></a>SQL概念</h2><blockquote>
<p><strong>什么是SQL</strong></p>
</blockquote>
<p>结构化查询语言(Structured Query Language)简称SQL，是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统；同时也是数据库脚本文件的扩展名。</p>
<p>SQL是一种所有关系型数据库的查询规范，通用的数据库操作语言，所有的数据库都支持。不同的数据库 SQL 语句有一些区别。</p>
<blockquote>
<p><strong>SQL分类</strong></p>
</blockquote>
<p><strong>数据查询语言（DQL:Data Query Language）：</strong></p>
<p>其语句，也称为“数据检索语句”，用以从表中获得数据，确定数据怎样在应用程序给出。保留字SELECT是DQL（也是所有SQL）用得最多的动词，其他DQL常用的保留字有WHERE，ORDER BY，GROUP BY和HAVING。这些DQL保留字常与其他类型的SQL语句一起使用。</p>
<p><strong>数据操作语言</strong>（<strong>DML</strong>：<strong>Data Manipulation Language</strong>）：</p>
<p>其语句包括动词INSERT，UPDATE和DELETE。它们分别用于添加，修改和删除表中的行。也称为动作查询语言。</p>
<p><strong>事务处理语言（TPL）：</strong></p>
<p>它的语句能确保被DML语句影响的表的所有行及时得以更新。TPL语句包括BEGIN TRANSACTION，COMMIT和ROLLBACK。</p>
<p><strong>数据定义语言（DDL）：</strong></p>
<p>其语句包括动词CREATE和DROP。在数据库中创建新表或删除表（CREAT TABLE 或 DROP TABLE）；为表加入索引等。DDL包括许多与人数据库目录中获得数据有关的保留字。它也是动作查询的一部分。</p>
<p><strong>指针控制语言（CCL）：</strong></p>
<p>它的语句，像DECLARE CURSOR，FETCH INTO和UPDATE WHERE CURRENT用于对一个或多个表单独立的操作。</p>
<p><strong>数据控制语言</strong>（<strong>DCL</strong>）：</p>
<p>它的语句通过GRANT或REVOKE获得许可，确定单个用户和用户组对数据库对象的访问。某些RDBMS可用GRANT或REVOKE控制对表单个列的访问。</p>
<h2 id="DDL语句"><a href="#DDL语句" class="headerlink" title="DDL语句"></a>DDL语句</h2><p>DDL（data definition language）数据库定义语言：在创建表的时候用到的一些SQL，比如说：CREATE、ALTER、DROP等。DDL主要是用在操作数据库，定义或改变数据库表的结构，数据类型等初始化工作。</p>
<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><ul>
<li><p>直接创建数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database 数据库名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断数据库是否已存在，不存在则创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> 数据库名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建数据库并指定字符集和排序方式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database 数据库名 <span class="type">character</span> <span class="keyword">set</span> 字符集;</span><br><span class="line"><span class="keyword">create</span> database 数据库名 <span class="type">character</span> <span class="keyword">set</span> utf8mb4 <span class="keyword">collate</span> utf8mb4_unicode_ci		# 最常用的utf<span class="number">-8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>补充：查看所有字符集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="type">character</span> <span class="keyword">set</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h4><ul>
<li><p>查看所有数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看单个数据库创建信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> database 数据库名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h4><ul>
<li><p>修改数据库的字符集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> database 数据库名 <span class="type">character</span> <span class="keyword">set</span> 字符集;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><ul>
<li><p>删除某个数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> database 数据库名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h4><ul>
<li><p>查看当前使用的数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> database();				</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用某个数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="数据库表操作"><a href="#数据库表操作" class="headerlink" title="数据库表操作"></a>数据库表操作</h3><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><ul>
<li><p>创建表结构</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">	字段名<span class="number">1</span> 字段类型<span class="number">1</span>,</span><br><span class="line">	字段名<span class="number">2</span> 字段类型<span class="number">2</span>,</span><br><span class="line">	...</span><br><span class="line">	字段名<span class="number">3</span> 字段类型<span class="number">3</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>快速建表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 <span class="keyword">like</span> 已存在的表名; 	# 创建一个新表，要求表结构与某个已存在的表相同</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表的注意事项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">表名称小写，尽量不要使用中文字符作为表名称;</span><br><span class="line">表名称要与业务有关;</span><br><span class="line">表名称不要以数字开头;</span><br><span class="line">表名称不要太长,不建议超过15-20个字符;</span><br><span class="line">不能使用保留字符串或者关键字</span><br><span class="line">必须设置存储引擎和字符集;</span><br><span class="line">针对不同的字段应该设置适合其的数据类型</span><br><span class="line">一张表中必须要有主键</span><br><span class="line">每个列都要注释</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h4><ul>
<li><p>查看所有表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看单个表结构</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看单个表的创建信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><ul>
<li><p>直接删除表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断表是否存在，存在则删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> 表名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h4><ul>
<li><p>修改表名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="keyword">table</span> 旧表名 <span class="keyword">to</span> 新表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改字符集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="type">character</span> <span class="keyword">set</span> 字符集;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加表字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 字段名 字段类型;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表字段类型</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify 字段名 字段类型;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表字段名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 change 旧字段名 新字段名 字段类型;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除表字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 字段名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="存储引擎相关"><a href="#存储引擎相关" class="headerlink" title="存储引擎相关"></a>存储引擎相关</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 查看数据库默认的存储引擎</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@DEFAULT_STORAGE_ENGINE</span>;</span><br><span class="line"></span><br><span class="line"># 修改数据库默认的存储引擎</span><br><span class="line"><span class="keyword">SET</span> DEFAULT_STORAGE_ENGINE<span class="operator">=</span>myisam;		# 修改当前会话默认的存储引擎为myisam（重新登录失效）</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> DEFAULT_STORAGE_ENGINE<span class="operator">=</span>myisam;		# 修改全局默认的存储引擎为myisam（需要重新登录生效）</span><br><span class="line"># 注意：也可以把默认存储引擎的配置写入配置文件<span class="operator">/</span>etc<span class="operator">/</span>my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">DEFAULT_STORAGE_ENGINE<span class="operator">=</span>MyISAM</span><br><span class="line"></span><br><span class="line"># 查看某张表的存储引擎</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> status <span class="keyword">like</span> <span class="string">&#x27;表名&#x27;</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br><span class="line"></span><br><span class="line"># 修改某张表的存储引擎</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 ENGINE<span class="operator">=</span>InnoDB;		# 经常使用它进行InnoDB表的碎片整理。</span><br></pre></td></tr></table></figure>



<h2 id="DML语句"><a href="#DML语句" class="headerlink" title="DML语句"></a>DML语句</h2><p>DML（Data Manipulation Language）数据操作语言，用户通过它可以实现对数据库的基本操作。就是我们最经常用到的UPDATE、INSERT、DELETE。 主要用来对数据库的数据进行一些操作。</p>
<h3 id="表记录操作"><a href="#表记录操作" class="headerlink" title="表记录操作"></a>表记录操作</h3><h4 id="插入记录"><a href="#插入记录" class="headerlink" title="插入记录"></a>插入记录</h4><ul>
<li><p>为所有字段插入记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">values</span>(字段<span class="number">1</span>的值,字段<span class="number">2</span>的值,字段<span class="number">3</span>的值);</span><br></pre></td></tr></table></figure>
</li>
<li><p>按字段插入记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名<span class="number">1</span>,字段名<span class="number">2</span>) <span class="keyword">values</span> (字段<span class="number">1</span>的值,字段<span class="number">2</span>的值);		# 没有插入数据的字段的值为<span class="keyword">null</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h4><ul>
<li><p>更新所有记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,字段名n<span class="operator">=</span>值n;				# 修改表中的所有记录</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新指定范围的记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,字段名n<span class="operator">=</span>值n <span class="keyword">where</span> ...		# 修改满足<span class="keyword">where</span>条件表达式的记录</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="删除记录"><a href="#删除记录" class="headerlink" title="删除记录"></a>删除记录</h4><ul>
<li><p>删除表中所有记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除指定范围的记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> ...			# 删除满足<span class="keyword">where</span>表达式的记录</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="DCL语句"><a href="#DCL语句" class="headerlink" title="DCL语句"></a>DCL语句</h2><p>DCL（Data Control Language）数据控制语言， 主要是DBA 用来管理系统中的对象权限时所使用，一般的开发人员很少使用。</p>
<p>DCL中主要包括创建用户、给用户授权、对用户撤销授权、查询用户授权和删除用户等操作。</p>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul>
<li><p>查询用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>,host,password <span class="keyword">from</span> <span class="keyword">user</span>;	# 用户信息存放在`mysql`数据库中的`<span class="keyword">user</span>`表中</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;密码&#x27;</span>;		# 主机名中可以用`<span class="operator">%</span>`代表通配符</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> identified <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">&#x27;456&#x27;</span>;		# 表示指定加密方式，否则采用默认配置</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改用户密码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> identified by <span class="string">&#x27;密码&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>情况root用户密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> authentication_string<span class="operator">=</span><span class="string">&#x27;&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><ul>
<li><p>查看用户权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>授予权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> 权限 <span class="number">1</span>, 权限 <span class="number">2.</span>.. <span class="keyword">on</span> 数据库名.表名 <span class="keyword">to</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;	# 具体的权限包括增删改查等：<span class="keyword">select</span>，<span class="keyword">update</span>,<span class="keyword">select</span>,<span class="keyword">delete</span>等</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> 数据库名.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;		# 一次性授予所有权限用<span class="keyword">all</span>，授予库中的所有表的权限用<span class="operator">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>撤销权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">revoke</span> 权限 <span class="number">1</span>, 权限 <span class="number">2.</span>.. <span class="keyword">on</span> 数据库名.表名 <span class="keyword">from</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;	# 撤销某用户的权限</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> 数据库名.表名 <span class="keyword">from</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;		# 撤销所有权限</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="DQL语句"><a href="#DQL语句" class="headerlink" title="DQL语句"></a>DQL语句</h2><p>DQL（Data QueryLanguage ）数据查询语言，用于从数据库表中查询数据，并不会修改数据，只是一种显示数据的方式。基本结构是由SELECT子句，FROM子句，WHERE子句组成的查询块。</p>
<h3 id="记录查询"><a href="#记录查询" class="headerlink" title="记录查询"></a>记录查询</h3><h4 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h4><ul>
<li><p>显示所有字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名;						# 查询表中所有记录，显示所有字段</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示表中指定字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>,字段<span class="number">2</span>,字段<span class="number">3</span> <span class="keyword">from</span> 表名;			# 查询表中所有记录，显示指定字段</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="别名查询"><a href="#别名查询" class="headerlink" title="别名查询"></a>别名查询</h4><ul>
<li><p>表别名</p>
<p>表别名取了一个新的名字，可以代替表名使用。<strong>表别名一般用于多表查询</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>,字段<span class="number">2</span>,字段<span class="number">3</span> <span class="keyword">from</span> 表名 <span class="keyword">as</span> 表别名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>字段别名</p>
<p>字段别名查询出记录显示新的名字，并不影响表的结构。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span> <span class="keyword">as</span> 别名<span class="number">1</span>,字段<span class="number">2</span> <span class="keyword">as</span> 别名<span class="number">2</span>,字段<span class="number">3</span> <span class="keyword">as</span> 别名<span class="number">3</span> <span class="keyword">from</span> 表名 <span class="keyword">as</span> 表别名;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="去除重复记录查询"><a href="#去除重复记录查询" class="headerlink" title="去除重复记录查询"></a>去除重复记录查询</h4><ul>
<li><p>去除单个字段的重复记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> 字段名 <span class="keyword">from</span> 表名;				# 显示该字段不重复的记录</span><br></pre></td></tr></table></figure>
</li>
<li><p>去除多个字段的重复记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> 字段名<span class="number">1</span>,字段名<span class="number">2</span> <span class="keyword">from</span> 表名;		# 显示多个字段不同时重复的记录</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="运算查询"><a href="#运算查询" class="headerlink" title="运算查询"></a>运算查询</h4><ul>
<li><p>字段值与固定数值运算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名<span class="number">1</span><span class="operator">+</span>固定数值 <span class="keyword">from</span> 表名;		# 把字段<span class="number">1</span>的值加上固定数值显示出来，字段<span class="number">1</span>的值必须也是数值类型</span><br></pre></td></tr></table></figure>
</li>
<li><p>字段值与字段值运算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名<span class="number">1</span><span class="operator">+</span>字段名<span class="number">2</span> <span class="keyword">from</span> 表名;		# 把字段<span class="number">1</span>的值加上字段<span class="number">2</span>的值显示出来，参与运算的字段必须都是数值类型</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><ul>
<li><p>比较运算符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span>				# 大于</span><br><span class="line"><span class="operator">&lt;</span>				# 小于</span><br><span class="line"><span class="operator">=</span>				# 等于</span><br><span class="line"><span class="operator">&gt;=</span>				# 大于等于</span><br><span class="line"><span class="operator">&lt;=</span>				# 小于等于</span><br><span class="line"><span class="operator">&lt;&gt;</span>				# 不等于</span><br><span class="line"><span class="operator">!=</span>				# 不等于，MySQL特有</span><br></pre></td></tr></table></figure>
</li>
<li><p>范围运算符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">between...and...		# 在一定范围内</span><br><span class="line"><span class="keyword">in</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>)		# 在特定的值中</span><br><span class="line"><span class="keyword">not</span> <span class="keyword">in</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>)	# 排除特定值</span><br></pre></td></tr></table></figure>
</li>
<li><p>通配符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">%</span>				# 匹配多个字符</span><br><span class="line">_				# 匹配单个字符</span><br></pre></td></tr></table></figure>
</li>
<li><p>非空判断</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">字段名 <span class="keyword">is</span> <span class="keyword">null</span>			# 为空，不能写成 字段名<span class="operator">=</span><span class="keyword">null</span></span><br><span class="line">字段名 <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>		# 不为空，不能写成 字段名<span class="operator">!=</span><span class="keyword">null</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>逻辑运算符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">and</span>			# 与</span><br><span class="line"><span class="keyword">or</span>			# 或</span><br><span class="line"><span class="keyword">not</span>			# 非</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><h4 id="简单模式匹配"><a href="#简单模式匹配" class="headerlink" title="简单模式匹配"></a>简单模式匹配</h4><p>like关键字用于在where子句中进行简单的模式匹配</p>
<ul>
<li><p>匹配多个字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 <span class="keyword">where</span> 字段名 <span class="keyword">like</span> <span class="string">&#x27;%字符串%&#x27;</span>;				#  <span class="operator">%</span> 代表任意<span class="number">0</span>个或多个字符</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配单个字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 <span class="keyword">where</span> 字段名 <span class="keyword">like</span> <span class="string">&#x27;_字符串_&#x27;</span>;				#  _ 代表任意单个字符</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="正则模式匹配"><a href="#正则模式匹配" class="headerlink" title="正则模式匹配"></a>正则模式匹配</h4><p>regexp关键字用于在where子句中进行正则表达式模式匹配</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[abc]：	表示括号内所列字符中的一个（类似正则表达式）。如 [ ] 内有一系列字符（<span class="number">01234</span>、abcde之类的）则可略写为“<span class="number">0</span><span class="number">-4</span>”、“a<span class="operator">-</span>e”</span><br><span class="line">[<span class="operator">^</span>abc]：	表示不在括号所列之内的单个字符。<span class="operator">^</span>[ ]表示的是：字符串开始的第一个字符。</span><br></pre></td></tr></table></figure>



<h3 id="结果处理"><a href="#结果处理" class="headerlink" title="结果处理"></a>结果处理</h3><h4 id="结果排序"><a href="#结果排序" class="headerlink" title="结果排序"></a>结果排序</h4><ul>
<li><p>单列排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 <span class="keyword">order</span> <span class="keyword">by</span> 字段名;				# 将查询结果按照某字段的值升序排序（默认）：<span class="keyword">asc</span></span><br><span class="line">主查询语句 <span class="keyword">order</span> <span class="keyword">by</span> 字段名 <span class="keyword">desc</span>;			# 将查询结果按照某字段的值降序排序，<span class="keyword">desc</span>：降序</span><br></pre></td></tr></table></figure>
</li>
<li><p>组合排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 <span class="keyword">order</span> <span class="keyword">by</span> 字段名<span class="number">1</span> [<span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span>],字段名<span class="number">2</span> [<span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span>],字段名<span class="number">3</span> [<span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span>];		</span><br><span class="line"># 按照多个字段进行排序，先按<span class="number">1</span>字段排序，在按<span class="number">2</span>字段排序，在按<span class="number">3</span>字段排序</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="结果分组"><a href="#结果分组" class="headerlink" title="结果分组"></a>结果分组</h4><ul>
<li><p>直接分组显示</p>
<p>通过GROUP BY子句返回每个分组的行记录，分组的目的就是为了统计，一般分组会跟<strong>聚合函数</strong>一起使用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 <span class="keyword">group</span> <span class="keyword">by</span> 字段名;						# 按照该字段名的值，将查询结果分组</span><br><span class="line"># 当我们使用某个字段分组,在查询的时候也需要将这个字段查询出来,否则看不到数据属于哪组的。</span><br></pre></td></tr></table></figure>
</li>
<li><p>分组后筛选</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 <span class="keyword">group</span> <span class="keyword">by</span> 字段名 <span class="keyword">having</span> 筛选条件;		# 将分组结果筛选后再展示</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 	where与having的区别</span></span><br><span class="line"><span class="comment">	where 子句：在分组之前过滤数据，即先过滤再分组。where 后面不可以使用聚合函数。</span></span><br><span class="line"><span class="comment">	having 子句：在分组之后过滤数据，即先分组再过滤。having 后面可以使用聚合函数。	*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><p>SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。</p>
<ul>
<li><p>聚合函数语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 聚合函数(字段名) <span class="keyword">from</span> 表名;			# 聚合函数经常与 <span class="keyword">SELECT</span> 语句的 <span class="keyword">GROUP</span> <span class="keyword">BY</span> 子句一同使用。</span><br></pre></td></tr></table></figure>
</li>
<li><p>常见聚合函数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">count</span>(字段名)：	统计总行数</span><br><span class="line"><span class="built_in">sum</span>(字段名)：	计算列总和</span><br><span class="line"><span class="built_in">avg</span>(字段名)：	求某一列平均值</span><br><span class="line"><span class="built_in">min</span>(字段名)：	求某一列的最小值</span><br><span class="line"><span class="built_in">max</span>(字段名)：	求某一列的最大值</span><br></pre></td></tr></table></figure>

<p>除了 COUNT 以外，其他的聚合函数会忽略空值。</p>
</li>
<li><p>聚合函数拓展</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">group_concat(字段名)：作为一个输出字段来使用，表示分组之后，根据分组结果，使用group_concat(字段名)来放置每一组的某字段的值的集合。</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="keyword">rollup</span>：在最后新增一行，来记录当前列里所有记录的总和，通常写在语句末尾。</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="分页展示"><a href="#分页展示" class="headerlink" title="分页展示"></a>分页展示</h4><p>要返回前几条或者中间某几行数据，mysql提供了limit功能，limit的作用就是限制查询记录的条数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">主查询语句 limit <span class="keyword">offset</span>,length;</span><br><span class="line"></span><br><span class="line"># <span class="keyword">offset</span>：起始行数，从 <span class="number">0</span> 开始计数，如果省略，默认就是 <span class="number">0</span></span><br><span class="line"># length： 返回的行数</span><br></pre></td></tr></table></figure>



<h3 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h3><p>连接是在多个表之间通过一定的连接条件，使表之间发生关联，进而能从多个表之间获取数据。连接查询是关系数据库中最主要的查询，主要包括内连接、外连接和交叉连接等。通过连接运算符可以实现多个表查询。</p>
<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p><strong>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。</strong></p>
<p>内连接分为隐式内连接和显示内连接两种，两者查询效果相同，仅仅使用格式不同。</p>
<ul>
<li><p>隐式内连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> 左表，右表 <span class="keyword">where</span> 条件表达式;				# 使用<span class="keyword">where</span>关键字</span><br></pre></td></tr></table></figure>


</li>
<li><p>显示内连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> 左表 [<span class="keyword">inner</span>] <span class="keyword">join</span> 右表 <span class="keyword">on</span> 条件表达式;		# 使用<span class="keyword">inner</span> <span class="keyword">join</span>…<span class="keyword">on</span>语句，可以省略<span class="keyword">inner</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p>外连接分为左连接和右连接两种。两者格式不同，查询结果也不同。</p>
<ul>
<li><p>左连接</p>
<p><strong>左连接表示的是在内连接的基础上保证左表的信息全部显示。</strong>用左边表的记录去匹配右边表的记录，如果符合条件的则显示；否则，显示 NULL。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> 左表 <span class="keyword">left</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> 右表 <span class="keyword">on</span> 条件表达式;			# <span class="keyword">outer</span>可以省略</span><br></pre></td></tr></table></figure>
</li>
<li><p>右连接</p>
<p><strong>右连接表示的是在内连接的基础上保证右表的信息全部显示。</strong>用右边表的记录去匹配左边表的记录，如果符合条件的则显示；否则，显示 NULL。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> 左表 <span class="keyword">right</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> 右表 <span class="keyword">on</span> 条件表达式;			# <span class="keyword">outer</span>可以省略</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="SQL子查询"><a href="#SQL子查询" class="headerlink" title="SQL子查询"></a>SQL子查询</h3><p>查询的嵌套，当一个查询是另一个查询的条件时，称之为子查询。一个查询的结果做为另一个查询的条件,其中内部的查询称为子查询，子查询要使用括号。</p>
<p>子查询的结果有三种情况：单行单列、多行单列、多行多列。</p>
<h4 id="单行单列子查询"><a href="#单行单列子查询" class="headerlink" title="单行单列子查询"></a>单行单列子查询</h4><p>子查询结果只要是单行单列，肯定在 WHERE 后面作为条件，父查询使用：比较运算符，如：&gt; 、&lt;、&lt;&gt;、&#x3D;、&gt;&#x3D;、&lt;&#x3D; 等。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> 数据库表名 <span class="keyword">where</span> 字段名<span class="operator">=</span>(子查询);</span><br></pre></td></tr></table></figure>



<h4 id="多行单列子查询"><a href="#多行单列子查询" class="headerlink" title="多行单列子查询"></a>多行单列子查询</h4><p>子查询结果只要是单行多列，结果集类似于一个数组，父查询使用in、not in运算符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> 数据库表名 <span class="keyword">where</span> 字段名 <span class="keyword">in</span> (子查询);</span><br></pre></td></tr></table></figure>



<h4 id="多行多列子查询"><a href="#多行多列子查询" class="headerlink" title="多行多列子查询"></a>多行多列子查询</h4><p>子查询结果只要是多行多列，肯定在 FROM 后面作为表，子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">/</span>字段列表 <span class="keyword">from</span> (子查询) [<span class="keyword">as</span>] 表别名 <span class="keyword">where</span> 条件表达式;		# <span class="keyword">as</span> 可以省略</span><br></pre></td></tr></table></figure>

</div><script src="https://jsd.cdn.zzko.cn/npm/hexo-theme-a4@latest/source/js/lightgallery.min.js"></script><script>if("undefined"!=typeof lightGallery) {
        var options1 = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1);
        }</script>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-09-26</span>
            
                <span>该篇文章被 邓胖胖</span>
            
            
                <span>打上标签:
                    
                    
                        <a href='/tags/MySQL/'>
                            MySQL
                        </a>
                    
                </span>
             
             
                <span>归为分类:
                    
                    
                        <a href='/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/'>
                            学习笔记
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    <!-- <div class="post-footer-pre-next">
        <span>上一篇：<a href=""></a></span>
        <span class="post-footer-pre-next-last-span-right">上一篇：<a href=""></a></span>
    </div> -->

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
    
</div>
<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery.min.js"></script>



                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>