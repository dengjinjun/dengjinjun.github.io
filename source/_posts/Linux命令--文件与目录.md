---
title: Linux命令--文件与目录
date: 2023-08-15 22:39:36
tags: Linux
---

# Linux命令--文件与目录

#### 查看文件信息

- 观察文件基本数据

  ```
  file [文件]		# 是否属于 ASCII 或者是 data 文件，或者是 binary ， 且其中有没有使用到动态函数库 （share library） 等等的信息，就可以利用 file 这个指令来检阅
  ```

  

- 列出文件夹信息

  ```
  ls			# list
  ```

  ```
  ls -a  ：全部的文件，连同隐藏文件（ 开头为 . 的文件） 一起列出来
  ls -d  ：仅列出目录本身，而不是列出目录内的文件数据（常与-l连用：ls -ld）
  ls -l  : 长数据串行出，包含文件的属性与权限等等数据；（常用别名ll）	
  ```

  

- 查看目录结构

  ```
  tree [目录]				# 以树形方式展示目录结构
  tree -a [目录]			# 连带展示隐藏文件
  tree -L [数字] [目录]		# 展示到第几层目录
  tree -F [目录]			# 在结果中区分文件和文件夹（文件夹后会带 / ）
  ```
  
  
  
- 变换目录

  ```
  cd [相对路径/绝对路径]			# change directory
  ```

  ```
  cd					# 不加任何参数代表切换到当前使用者的主文件夹 ~ 
  cd ~dengpangpang	# 代表切换到某用户的主文件夹，仅限root用户使用
  cd ..				# 去到上层目录
  cd -				# 回到刚刚的那个目录
  ```

  

- 显示当前的工作目录

  ```
  pwd			# print working directory
  ```

  ```
  pwd -p		# 显示完整的真实路径，而非链接路径
  ```



- 查看文本文件内容

  ```
  cat [-options] [文件]		# 正向查看
  tac [-options] [文件]		# 反向查看
  cat -n			# 显示行号
  cat -A			# 显示控制字符
  ```

  ```
  head [-x] [文件]		# 默认查看前10行内容,x代表数字，查看前几行
  tail [-x] [文件]		# 默认查看后10行内容,x代表数字，查看后几行
  tail -4 a.txt | head -2		# 查看后四行的前两行，即查看倒数第4行和倒数第3行
  tail -f a.txt 			# 动态监测文件末尾内容
  ```

  ```
  less [文件]			# 查看文件，上下键可以翻页
  more [文件]			# 查看文件，空格键可以翻页
  ```

  

- 查阅二进制文件内容

  ```
  od [-t options] [文件]
  ```

  ```
  -t  ：后面可以接各种“类型 （TYPE）”的输出，例如：
        a       ：利用默认的字符来输出；
        c       ：使用 ASCII 字符来输出
        d[size] ：利用十进制（decimal）来输出数据，每个整数占用 size Bytes ；
        f[size] ：利用浮点数值（floating）来输出数据，每个数占用 size Bytes ；
        o[size] ：利用八进位（octal）来输出数据，每个整数占用 size Bytes ；
        x[size] ：利用十六进制（hexadecimal）来输出数据，每个整数占用 size Bytes ；
  ```



- 搜寻文件

  ```
  whereis [-options] [文件或目录]			# 在一些特定的目录中查找文件或目录
  	-l    :可以列出 whereis 会去查询的几个主要目录而已
      -b    :只找 binary 格式的文件
      -m    :只找在说明文档 manual 路径下的文件
      -s    :只找 source 来源文件
      -u    :搜寻不在上述三个项目当中的其他特殊文件
  ```

  ```
  locate [-options] [文件或目录的关键字]	# 在系统数据库中搜索包含关键字的文件或目录
  	-i  ：忽略大小写的差异；
      -c  ：不输出文件名，仅计算找到的文件数量
      -l  ：仅输出几行的意思，例如输出五行则是 -l 5
      -S  ：输出 locate 所使用的数据库文件的相关信息，包括该数据库记录的文件/目录数量等
      -r  ：后面可接正则表达式的显示方式
  系统数据库每日自动更新，如果需要手动更新可以输入 updatedb
  ```

  

#### 文件及目录的创建、删除和移动

- 创建新文件或修改文件时间

  ```
  touch [文件位置]			# 在指定目录下创建一个文本文件（无则创建，有则修改时间）
  touch {a,b,c,d}.txt			# 可以创建多个文本文件，可以具有统一的后缀名
  touch /tmp/{1..100}			# 快速建立100个文件
  ```

  三种文件时间

  ```
  ctime: change time。对文件更名，修改文件的属主等操作，会更新ctime。
  
  mtime: 就是modify time。mtime和ctime的区别在于，只有修改了文件的内容，才会更新文件的mtime
  
  atime: access time。这个就是每次查看文件内容的时候会更新。比如cat操作，而ls操作是不会更新的。
  ```



- 创建一个新的目录

  ```
  mkdir [要创建的目录]		# make directory
  ```

  ```
  mkdir /opt/{a,b,c}			# 建立多个文件夹
  mkdir -m [xyz] -p [要创建的目录]		# -m 代表预分配权限，-p代表递归创建目录（否则必须有上层目录）
  ```

  

- 移除一个空目录

  ```
  rmdir		# remove directory
  rmdir -p [要删除的目录]			# -p代表可以递归删掉目标目录的上层空目录
  ```



- 删除文件或目录

  ```
  rm [-options] [目标文件或目录]		# remove
  ```

  ```
  rm -f  ：就是 force 的意思，忽略不存在的文件，不会出现警告讯息；
  rm -i  ：互动模式，在删除前会询问使用者是否动作
  rm -r  ：递回删除! 最常用在目录的删除,是非常危险的选项!
  ```

  注意：`rm -rf /*`：强制删除根目录下的所有文件

  


- 复制文件或目录

  ```
  cp	[-options] [原文件/目录]	[目标文件或目录]		# 如果是目标目录则不改名复制，如果是目标文件则改名复制
  ```

  ```
  cp -i  ：若目标文件（destination）已经存在时，在覆盖时会先询问动作的进行（常用）
  cp -p  ：连同文件的属性（权限、用户、时间）一起复制过去，而非使用默认属性（备份常用）；
  cp -a  ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了；
  cp -r  ：递回持续复制，用于目录的复制行为；（常用）
  cp -r /tmp/* /test		# 把tmp文件夹下的所有文件，拷贝到test文件夹下（不包含tmp文件夹）
  ```

  

- 移动文件或更名目录

  ```
  mv [-options] [原文件/目录] [目标文件/目录]		# move
  ```

  ```
  mv -f  ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
  mv -i  ：若目标文件 （destination） 已经存在时，就会询问是否覆盖！
  mv -u  ：若目标文件已经存在，且 source 比较新，才会更新 （update）
  ```

  注意：区别`rename`
  
  
  

#### 文件的属性与权限

- 查看默认(创建)文件权限

  ```
  umask		# 以数字方式查看权限
  umask -S	# 以字母的方式查看权限
  ```

  ```
  umask 022	# 修改默认权限，数字表示移除的权限，此处022表示移除群组和其他人的写权限
  ```

  

- 改变文件拥有者

  ```
  chown [账号名称] [文件或目录]				# change owner
  ```

  ```
  chown -R [账号名称：群组名称] [文件或目录]	# 同时改变文件拥有者和群组， -R表示递归修改，用于目录的修改。
  ```

  

- 改变文件所属群组

  ```
  chgrp [-R] [群组名] [文件或目录]					# change group ,-R表示递归，用于目录
  ```



- 改变文件权限

  ```
  chmod				# change mode
  ```

  - 数字形式改变文件权限

    ```
    chmod [-R] xyz [文件或目录]		# xyz分别代表文件拥有者，群组和其他人的权限
    ```

  - 字母方式改变文件权限

    ```
    chmod [-R] u=rwx,go=rx [文件或目录]	# u指user，g指代group，o指代others
    ```

    ```
    chmdo [-R] a-x [文件或目录]			# a代表三种身份，a-x表示三种身份都拿掉执行权限	
    ```

    

- 文件隐藏属性

  ```
  lsattr [-options] [文件或目录]			# 查看文件隐藏属性
  	-a ：将隐藏文件的属性也秀出来；
  	-d ：如果接的是目录，仅列出目录本身的属性而非目录内的文件名；
  	-R ：连同子目录的数据也一并列出来
  ```

  ````
  chattr [+/—/=] [-options] [文件或目录]			# 设置文件隐藏属性，+-=表示增加移除或设定属性
  	a ：文件将只能增加数据，而不能删除也不能修改数据，只有root才能设置这属性
  	i ：可以让一个文件“不能被删除、改名、设置链接也无法写入或新增数据。只有root能设置此属性
  ````

  

