---
title: 模块和包-内置模块2
date: 2023-08-15 22:39:36
tags: python
---



# 模块和包-内置模块(二)

## os

- 路径的拼接

  ```python
  windows: C:\xx\xx\xxxx
  	Mac: /user/xx/xx/xxxx
    Linux: /user/xx/xx/xxxx
  ```

   ```python
  import os
  
  path = os.path.join("x1","x2","x3",'log.txt')
  print(path)		# x1\x2\x3\log.txt
   ```

- 找到当前目录的上级目录

  ```python
  import os
  path = "x1/x2/x3/log.txt"
  file_path = os.path.dirname(file_path)	# x1/x2/x3
  ```

- 绝对路径

  绝对路径是从根目录开始的路径

  相对路径是基于当前文件所在目录的路径

  ```python
  import os
  
  file_name = "xx"	# 相当于一个相对路径
  file_path = os.path.abspath(file_name)	# 获取到这个文件的绝对路径
  ```

- 判断文件是否存在

  ```python
  import os
  
  file_path = os.path.join("xx","xx.txt")	# 这是一个文件路径
  
  # 判断路径是否存在
  os.path.exists(file_path)	# 如果存在，值为True;不存在，值为False
  
  # 可用于文件操作，防止读取文件时，文件不存在而报错
  ```

- 创建文件夹

  ```python
  import os
  
  path = os.path.join("xx","xx","xxxx")	# 得到一个目录的路径
  if not os.path.exist(path):	
      os.makedirs(path)		# 创建这个文件夹，如果已存在会报错，所以需要先判断目录是否已存在
  ```

- 删除文件

  ```python
  import os
  
  # 删除文件
  path = os.path.join("xx","xx","xxxx")
  os.remove(path)		# 将这个目录删除，如果文件不存在会报错
  ```

- 判断一个目录是否是文件夹

  ```python
  import os
  
  path = os.path.join("xx","xx","xxxx")
  os.path.isdir(path)		# 如果是文件夹，值为True;如果不是文件夹，值为False
  ```

- 查看某个目录下的文件和文件夹(单级)

  ```python
  import os
  
  res = os.listdir("D:\connect\Assets")
  print(res)		# 得到一个列表，其中的元素是该目录下的文件名
  ```

- 查看某个目录下的所有文件和文件夹(多级)

  ```python
  import os
  
  for item in  os.walk("D:\connect\Assets"):
      print(item)
  # 该语句的一次循环会输出三个列表，第一个列表只有一个元素，是文件的主路径，第二个列表是该主路径下的文件夹列表，第三个列表是该主路径下的文件列表
  # 第二次循环会将文件夹列表中的第一个文件夹作为主路径，获得该主路径下的文件夹列表和文件列表
  # 直到获得所有文件为止
  ```

  ```python
  import os
  
  # 该操作可以直接获得某个目录下的所有文件
  for in_path, folder_list, file_list in os.walk("D:\connect\Assets"):
      for file in file_list:
          abs_path = os.path.join(in_path,file)
          print(abs_path)
  ```

## shutil

- 删除文件夹

  ```python
  import os
  import shutil	
  
  path = os.path.join("xx","xx","xxxx")
  shutil.rmtree(path)		# 将这个目录删除，文件夹中的文件也会被删除，如果文件夹不存在会报错
  ```

- 拷贝文件夹

  ```python
  import shutil
  
  shutil.copytree("原文件夹路径", "目标文件夹路径")	# 可以自动创建文件夹
  ```

- 拷贝文件(两种方式)

  ```python
  import shutil
  
  # 拷贝到目标文件夹下
  shutil.copy("原文件夹路径", "目标文件夹路径\\")		# 要保证目标文件夹存在
  
  # 拷贝到目标文件夹下的某个文件中(是一个不重名的文件)
  shutil.copy("原文件夹路径", "目标文件夹路径文件名")		# 会自动创建一个不重名的拷贝文件
  ```

- 重命名文件或文件夹

  ```python
  import shutil
  
  shutil.move("原文件路径文件(夹)名", "目标文件路径文件(夹)名")	# 原文件要存在，否则会报错
  ```

- 压缩和解压缩

  ```python
  import shutil
  
  # 压缩
  """
  base_name 压缩后，压缩包的名称
  root_dir 要压缩的文件夹的路径
  format 后缀名
  """
  shutil.make_archive(root_dir = "xxx", base_name = "xx/xxx",format = "zip")
  ```

  ```python
  import shutil
  
  # 解压缩
  """
  filename 压缩包的文件名
  extract_dir 解压后，文件的路径
  format 后缀名
  """
  shutil.unpack_archive(filename="dd.zip", extract_dir="xx/xxx", format="zip")
  ```









