---
title: 文件操作
date: 2023-08-15 22:39:36
tags: python
---



# 文件操作

文件操作只能对文本文件进行操作（.txt）

## 快速读写

### 文件打开模式

```python
mode="wb"					#是指以写文件的模式打开(文件不存在则创建文件，文件存在则清空并打开文件)
mode="w",encoding="utf-8"	#后续写入内容时不用指定编码方式
```

```python
mode="ab"					#以追加写入文件内容的模式打开(文件不存在则创建文件，文件存在则打开文件)
mode="a",encoding="utf-8"	#后入续写内容时不用指定编码方式
```

```python
mode="rb"					#以读取文件内容的模式打开
mode="r",encoding="utf-8"	#后续读取内容时不用指定编码方式
```

注意：创建文件时，文件所在的目录必须已存在。即文件操作只能创建文件，而不能创建文件夹

### 写文件

```python
#三步：打开文件->写内容->关闭文件

#打开文件
file_object = open("test.txt",mode="wb")	
# "test.txt"是文件路径 

#写内容
name = "邓胖胖"
file_object.write(name.encode("utf-8"))	# 用utf-8的编码方式写入name代指的字符串
# 执行完此句将内容写在了内存缓冲区中，并非直接写在了硬盘中，关闭文件后才会写入硬盘
# 要想实时写入硬盘，可以使用下面语句：
file_object.flush()	# 此句执行的作用是将内存缓冲区的内容写入硬盘

#关闭文件
file_object.close()
```

### 读取文件内容

```python
#读取文件全部内容

#打开文件
file_object = open("test.txt",mode="rb")

#读取文件内容
text = file_object.read()	# 通过read()读取文件全部内容，此时读取到的是字节类型
text_string = text.decode("utf-8")	#转换成字符串类型

#关闭文件
file_object.close()
```

```python
#逐行读取文件内容

#打开文件
file_object = open("test.txt",mode="rb")

#逐行读取文件内容
line1 = file_object.readline()
#读取大的文件时，可以用for逐行读取
#for line in file_object:
	line_string = line.decode("utf-8")
	print(line_string)

#关闭文件
file_object.close()
```

### with上下文

在编写文件操作相关的代码时，可能会出现忘记关闭文件，使用`with`上下文可以解决这个问题，比如：

```python
#开始
with open("test.txt",mode="rb") as file_object:
    data = file_object.read()
    print(data)
#结束，随着缩进结束，文件已经关闭
```

