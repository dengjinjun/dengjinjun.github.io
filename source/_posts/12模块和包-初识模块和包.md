---
title: 模块和包-初识模块
date: 2023-08-15 22:39:36
tags: python
---

# 模块和包-初识模块和包

## 什么是模块和包？

- 模块

  ```python
  模块就是一个py文件，我们可以将一些功能按照某个维度来划分
  模块包括自定义模块、内置模块和第三方的模块
  ```

- 包

  ```python
  包是一个文件夹，里面包含多个py文件，即包含了很多简单功能的模块，可以实现复杂功能。也可以按照功能划分
  ```

  一般情况下，学习和讨论时并不严格划分，统称为模块。

## 包的安装

### 通过pip安装

在python的目录中,pip.exe是一个专门用于帮助下载第三方包的工具。

```python
D:\Python
	-python.exe		python解释器
    -Scripts
    	-pip.exe	包管理工具
    -Lib(内置+第三方)
    	-site-packages
        	-第三方包
```

#### pip的常见命令

- 安装

  ```python
  pip install 包名称
  ```

- 卸载

  ```python
  pip uninstall 包名称
  ```

- 罗列已安装的第三方包

  ```python
  pip list
  ```

- 将已安装的包写入到文件中

  ```python
  pip freeze > requirements.txt
  ```

- 批量安装包(从`requirements.txt`文件中)

  ```python
  pip install -r requirements.txt
  # 同一个python环境下，只能安装一个版本的包
  # requirements.txt要放在项目的根目录下
  ```

### 下载配置

https://pypi.org/是一个开源包的获取网站，pip.exe通过这个网站将包下载到本地，但有时速度比较慢。

可以通过国内的其他同步网站下载，比如豆瓣，基于豆瓣源去下载第三方包：

- 一次性操作：

  ```python
  pip3 install 包名 -i https://pypi.douban.com/simple/
  ```

- 永久使用豆瓣

  ```python
  pip config set global.index-url https://pypi.douban.com/simple/
  # 运行这个命令之后，以后直接使用pip install 包名 会默认从豆瓣下载
  ```

### 源码安装

如果pip.exe中下载不到想要的包，可以通过源码安装

- 下载源码并解压

- 安装[在终端操作]

  - 进入源码目录

  - 执行安装命令

    ```python
    python3.9 setup.py build
    python3.9 setup.py install
    ```

    

### wheel安装

有些源码开发者会把源码打包成wheel包，以供下载和安装。

- pip支持wheel安装

  ```python
  pip install wheel
  ```

- 下载wheel包

- 进入终端安装

  - 进入wheel包的目录

  - 执行安装命令

    ```python
    pip install wheel包文件名
    ```

    

## 模块和包-模块和包的导入

### 模块和包的导入路径

- python内置的模块都放在了python的安装目录下，可以直接导入使用

```python
import 模块名
# 后续代码中可以调用该导入模块的功能
```

- 一般情况下，自定义的模块和包需要放在运行文件的同级目录下，才可以导入使用

```python
import 模块名			# 运行文件与需要导入的模块在同级目录
import 包名.模块名	   # 运行文件与需要导入的模块所在的包在同级目录
# 后续代码中可以调用该导入模块的功能
```

​		当需要让python去自定义的目录中寻找模块时，要用到`sys`模块：`sys.path`是获取python寻找模块的目录

```python
import sys
sys.path.append(r"模块所在目录")	# 将该模块所在目录添加到python寻找模块的目录中 
import 模块名
# 后续代码中可以调用该导入模块的功能
```

​		自定义模块不能与python内置模块重名

### 模块和包的导入方式

#### import导入

导入级别：导入`py`文件

#### from导入

导入级别：可以是`py`文件中的函数，也可以是`py`文件，更为灵活，比如：

```python
from 包名 import 模块名		# 导入py文件
from 模块名 import func1	 # 导入py文件中的一个函数
from 模块民 import func1,func2,func3	# 导入py文件中的多个函数
from 模块名 import *		 # 导入py文件中的全部函数
from 模块名 import func1 as f1		# 在本文件中，给导入的函数重命名，避免与本文件中的函数重名
```

一般来说，单层目录时，可以用`import`或`from`导入，当层级较深时，用`from`导入

### 主文件

主文件是指一个python项目中，作为程序入口的`py`文件。

`py`文件执行时，系统内部会创建一个变量名，`__name__`

主动执行时，`__name__="__main__"`，被导入执行时，`__name__=py文件名`

所以当编写主文件时，运行代码前要加上`if __name__="__main__":`，防止别人导入时执行