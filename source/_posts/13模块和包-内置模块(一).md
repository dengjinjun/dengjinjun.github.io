---
title: 模块和包-内置模块
date: 2023-08-15 22:39:36
tags: python
---



# 模块和包-内置模块

内置模块是python中提供好的功能模块

## hashlib

对数据进行加密的模块

比如开发项目时，密码不能用明文存储，防止数据库泄露时密码也泄露，就要用到`hashlib`模块

```python
import hashlib

name = "邓胖胖"
pwd = "123456"
obj = hashlib.md5()		# md5是一种加密方式
obj.update(pwd.encode("utf-8"))	
res = obj.hexdigest()	#
print(res)				# e10adc3949ba59abbe56e057f20f883e
```

- 关于MD5加密

  MD5加密后不可反解，用户登录时，根据用户所输入的密码进行MD5加密，与数据库中的密文进行对比。

  直接的MD5加密得到的密文可以通过撞库得到明文，所以也并不安全，可以通过加盐的方式解决

  - 加盐

    输入一个字符串，增加撞库的难度，比如：

    ```python
    import hashlib
    
    name = "邓胖胖"
    pwd = "123456"
    salt = "jsdhfjkskf"		# 随意输入的字符串
    obj = hashlib.md5()		# md5是一种加密方式
    obj.update(salt.encode("utf-8"))	
    res = obj.hexdigest()	
    print(res)		
    ```


## random

帮助我们生成一些随机数据，比如：

- 随机生成整数或小数

```python
import random

v1 = random.randint(1, 10)		# 大于等于1，小于等于10的随机整数
v2 = random.uniform(1, 10)		# 大于等于1，小于等于10的随机小数
```

- 随机抽取列表中的一个或多个元素

```python
import random

data_list = [11,22,33,44,55]
v3 = random.choice(data_list)	# 随机抽取一个列表中的元素
v4_list = random.sample(data_list,3)	# 随机抽取列表中的多个元素，此处是3个
print(v4_list)					#[11, 55, 22]，结果会生成一个列表
```

- 打乱顺序

```python
import random

data_list = [i for i in range(10)]	# 生成一个元素有序的列表
random.shuffle(data_list)			# 打乱列表中元素的顺序
print(data_list)					# [1, 9, 5, 6, 7, 4, 8, 2, 0, 3]
```

## json

本质上是一种数据格式，以字符串的形式存在。作用是在不同的编程语言之间实现数据传输。

`json`格式外部整体是一个大的字符串，

`json`格式内部的字符串一定要用双引号

`json`格式不存在元组的数据类型，转换过程中会将元组转换为列表

`json`格式中一般只包括：整数、小数、字符串、双引号、字典、列表、`true`/`false`、`null`

- 序列化

  ```python
  import json
  
  info = {"k1":123, "k2":(2,3,4,5)}
  
  # 将python中的数据类型转换成json中的字符串
  res = json.dumps(info)		# 也称为序列化
  print(res)					# {"k1": 123, "k2": [2, 3, 4, 5]}
  ```

  - 关于中文

    python数据里的中文在转换为`json`中的字符串时，默认会转换为Unicode编码，如果想以中文的形式保留，需要加上`ensure_ascii = False`

    ```python
    import json
    
    info = {"name":"邓胖胖", "age":23}
    v1 = json.dumps(info)	# {"name": "\u9093\u80d6\u80d6", "age": 23}
    v2 = json.dumps(info,ensure_ascii = False)	# {"name":"邓胖胖", "age":23}
    ```

- 反序列化

  ```python
  import json
  
  data_string = '{"k1": 123, "k2": [2, 3, 4, 5]}'	
  
  # 将json中的字符串转换成python中的数据类型
  res = json.loads(data_string)	# 也称为反序列化
  print(res)						# {'k1': 123, 'k2': [2, 3, 4, 5]}
  ```

## time

- 获取当前的时间戳

  ```python
  import time
  
  v1 = time.time()	# 1676378548.093892  这个时间是从1970年1月1日至今的秒数
  ```

- 程序停止N秒，再继续运行

  ```python
  import time
  
  while True:
      print("上岸")
  	time.sleep(1)	# 运行到此处停止1秒
  ```

## datetime

- 获取当前时间

  ```python
  import datetime
  
  v1 = datetime.datetime.now()	
  # 2023-02-14 20:54:03.058263 ,这是date-time类型的数据，并非字符串
  ```
  
  - `datetime`类型转换为字符串类型
  
    ```python
    from datetime import datetime
    
    v1 = datetime.now()		# datetime类型
    v2 = v1.strftime("%Y-%m-%d %H:%M:%S")	# 字符串类型  - 和 : 并不是关键字，可以更改
    ```
  
  - 字符串类型转换为`datetime`类型
  
    ```python
    from datetime import datetime
    
    v1 = "2023-02-14"		#字符串类型
    v2 = datetime.strptime(v1, "%Y-%m-%d")	# datetime类型
    ```
  
  - `datetime`类型转换为时间戳类型
  
    ```python
    from datetime import datetime
    
    v1 = datetime.now()		# datetime类型
    v2 = v1.timestamp()		# 时间戳类型
    ```
  
  - 时间戳类型转换为`datetime`类型
  
    ```python
    from datetime import datetime
    import time
    
    v1 = time.time()		# 时间戳类型
    v2 = datetime.fromtimestamp(v1)		# datetime类型
    ```
  
  - `datetime`数据类型存在的意义
  
    ```python
    # 进行时间相关的运算
    from datetime import datetime,timedelta
    
    v1 = datetime.now()		# datetime类型
    v2 = v1 - timedelta(days=200)		#两百天前的时间
    v3 = v1 + timedelta(days=29,hours=34,minutes=23,seconds=122)	
    #29天34小时23分122秒之后的时间
    ```
  
    

