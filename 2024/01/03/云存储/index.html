<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="云存储" />
    <meta name="hexo-theme-A4" content="v1.9.1" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Dengpangpang</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Dengpangpang</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">🍟首页</a></li>
            
        
            
                <li><a href="/list/">📝文章</a></li>
            
        
            
                <li><a href="/tags/">🏷️标签</a></li>
            
        
            
                <li><a href="/categories/">🗂️分类</a></li>
            
        
            
                <li><a href="/about/">👁️关于</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            云存储
        </div>
      
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%A7%E5%93%81%E7%AE%80%E4%BB%8B"><span class="post-toc-text">产品简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8OSS"><span class="post-toc-text">对象存储OSS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="post-toc-text">基础概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="post-toc-text">常用功能</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F"><span class="post-toc-text">访问方式</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8NAS"><span class="post-toc-text">文件存储NAS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5-1"><span class="post-toc-text">基础概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#NAS%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="post-toc-text">NAS使用流程</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E4%BA%91%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BC%98%E5%8C%96"><span class="post-toc-text">云存储管理与优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OSS%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="post-toc-text">OSS权限控制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OSS%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8"><span class="post-toc-text">OSS数据安全</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E6%89%98%E7%AE%A1"><span class="post-toc-text">静态网站托管</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OSS%E6%88%90%E6%9C%AC%E4%BC%98%E5%8C%96"><span class="post-toc-text">OSS成本优化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OSS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="post-toc-text">OSS性能优化</span></a></li></ol></li></ol>
            
        
        <link rel="stylesheet" type="text/css" href="https://jsd.cdn.zzko.cn/npm/hexo-theme-a4@latest/source/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="产品简介"><a href="#产品简介" class="headerlink" title="产品简介"></a>产品简介</h2><p>阿里云的云存储产品主要有三类：<strong>块存储</strong>、<strong>文件存储</strong>、<strong>对象存储</strong></p>
<table>
<thead>
<tr>
<th><strong>对比项</strong></th>
<th><strong>文件存储NAS</strong></th>
<th><strong>对象存储OSS</strong></th>
<th><strong>块存储EBS</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>特点</strong></td>
<td>提供高吞吐和高IOPS的同时，<strong>可以灵活地管理和访问数据</strong>，并且可以<strong>支持大规模的数据存储和管理</strong>。</td>
<td><strong>支持公网访问，一个低成本的海量共享存储空间</strong>，适合存储写入后较少修改的数据，</td>
<td>块级存储，可随机读写，类似物理硬盘，<strong>存储效率较高</strong>，可以<strong>快速存储和检索数据</strong>。<strong>支持分区格式化并建立文件系统</strong>。</td>
</tr>
<tr>
<td><strong>应用场景</strong></td>
<td>主要应用于<strong>科学计算、容器数据持久化</strong>和<strong>企业在线生产应用的数据存储</strong>。如：AI计算、基因计算、药物计算、容器共享PV、日志数据持久化、CI&#x2F;CD平台、云桌面数据文件共享等</td>
<td><strong>非常适用于静态数据的存储系统</strong>，<strong>擅长存储非结构化数据</strong>。主要应用于<strong>基于对象API开发的互联网应用程序的数据存储</strong>。如：互联网业务的音视频存储、数据湖、云相册、个人&#x2F;企业网盘类应用</td>
<td>适用于OLTP数据库、NoSQL数据库等<strong>IO密集型的高性能、低时延业务场景</strong></td>
</tr>
<tr>
<td><strong>访问模式</strong></td>
<td>上千个ECS或上万个容器，<strong>通过NFS、SMB、POSIX接口并发读取相同文件</strong>，随机读写</td>
<td><strong>数百万客户端通过SDK、RESTful并发读相同文件</strong>，追加写</td>
<td>EBS是裸磁盘，挂载到ECS后不能被操作系统应用直接访问，<strong>需要格式化成文件系统（ext3、ext4、NTFS等）后才能被访问</strong></td>
</tr>
<tr>
<td><strong>IOPS</strong></td>
<td>十万级别</td>
<td>千级别</td>
<td>万～百万级别</td>
</tr>
<tr>
<td><strong>容量</strong></td>
<td>GiB~PiB</td>
<td>无限制</td>
<td>GiB~TiB</td>
</tr>
<tr>
<td><strong>文件级别的授权</strong></td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td><strong>数据存储方式</strong></td>
<td>目录树的组织形式</td>
<td>扁平的文件组织形式</td>
<td>需拆分数据到任意划分且大小相同的卷中</td>
</tr>
<tr>
<td><strong>协议</strong></td>
<td><strong>NFS和SMB协议</strong></td>
<td><strong>HTTP&#x2F;HTTPS协议</strong></td>
<td><strong>标准虚拟块设备协议接口或NVMe协议接口</strong></td>
</tr>
</tbody></table>
<h2 id="对象存储OSS"><a href="#对象存储OSS" class="headerlink" title="对象存储OSS"></a>对象存储OSS</h2><h3 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h3><blockquote>
<p><strong>对象（object）</strong></p>
</blockquote>
<p>OSS存储数据的基本单元，也被称为OSS的文件。可以是存放在对象存储OSS Bucket中的照片文件、文本文件、视频文件等。</p>
<blockquote>
<p><strong>存储空间（Bucket）</strong></p>
</blockquote>
<p>存储空间是用户用于存储对象（Object）的容器，所有的对象都必须隶属于某个存储空间，提供了标准存储（频繁访问）、低频访问存储（每月1~2次）、归档存储（长期保存）、冷归档存储（超长时间存放）等存储类型。</p>
<blockquote>
<p><strong>地域（Region）</strong></p>
</blockquote>
<p>地域是指 OSS的数据中心所在物理位置。<strong>阿里云地域选择可以遵循就近原则，优先选择更靠近用户群的地域节点。</strong></p>
<blockquote>
<p><strong>读写权限</strong></p>
</blockquote>
<p>通过Bucket ACL权限列表，可以设置Bucket ACL权限为私有、公共读或者公共读写。</p>
<blockquote>
<p><strong>访问域名（Endpoint）</strong></p>
</blockquote>
<p>OSS对外服务的访问域名，Endpoint格式为：外网Endpoint是oss-{Region}.aliyuncs.com，内网Endpoint是oss-{Region}-internal.aliyuncs.com。<strong>通过OSS内网地址访问OSS资源时，不收取流量费用。</strong></p>
<blockquote>
<p><strong>访问密钥（Accesskey）</strong></p>
</blockquote>
<p>简称AK，指的是访问身份验证中用到的AccessKeyId和AccessKeySecret。OSS通过使用AccessKeyId和AccessKeySecret对称加密的方法来验证某个请求的发送者身份,可通过控制台创建AccessKey。</p>
<p>AccessKey的来源有：</p>
<ul>
<li>Bucket的拥有者申请的AccessKey。</li>
<li>被Bucket的拥有者通过RAM授权给第三方请求者的AccessKey。</li>
<li>被Bucket的拥有者通过STS授权给第三方请求者的AccessKey。</li>
</ul>
<h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h3><p>开通OSS之后，可以通过OSS控制台使用其功能：</p>
<p><a href="/../pic/224b5b82-da38-4221-9080-a6098179db85.jpg" title="img" class="gallery-item" style="box-shadow: none;"> <img src="/../pic/224b5b82-da38-4221-9080-a6098179db85.jpg" alt="img"></a></p>
<ul>
<li><strong>创建存储空间</strong>：根据实际需求，创建不同类型的存储空间来存储不同的数据；</li>
<li><strong>上传文件</strong>：上传文件到OSS前，必须先在阿里云的任意一个地域创建一个存储空间。创建存储空间后，您可以上传任意文件到该存储空间。有<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/31848.htm?spm=a2c4g.52830.0.0.5d5d5ac4Y3f6Ax#concept-bws-3bb-5db">简单上传</a>、<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/31850.htm?spm=a2c4g.52830.0.0.5d5d40c2E0HfPs#concept-wzs-2gb-5db">分片上传</a>、<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/31850.htm?spm=a2c4g.52830.0.0.5d5d40c2E0HfPs#concept-wzs-2gb-5db">追加上传</a>等方式；</li>
<li><strong>列举文件</strong>：Object上传成功后，默认按照字母序排列。可以列举出当前Bucket的所有Object、指定前缀的Object、指定个数的Object等；</li>
<li><strong>搜索文件</strong>：Object上传成功之后，可以通过搜索文件或者文件夹的方式进行搜索，快速查找目标文件；</li>
<li><strong>分享文件</strong>：文件上传至存储空间后，您可以将文件URL分享给第三方，供其下载或预览；</li>
<li><strong>下载文件</strong>：当文件（Object）上传至存储空间（Bucket）后，您可以将文件下载至浏览器默认路径或本地指定路径；</li>
<li><strong>删除文件</strong>：可以一次删除单个或者多个文件、碎片等。您可以定期删除过期文件，节省您的存储空间。</li>
</ul>
<h3 id="访问方式"><a href="#访问方式" class="headerlink" title="访问方式"></a>访问方式</h3><p>阿里云对象存储OSS提供了多种访问及操作OSS资源的方式：阿里云控制台、OSS提供的工具、OSS提供的SDK等</p>
<p><a href="/../pic/27965e53-05d9-47d1-af2a-7c190e73eaeb.jpg" title="img" class="gallery-item" style="box-shadow: none;"> <img src="/../pic/27965e53-05d9-47d1-af2a-7c190e73eaeb.jpg" alt="img"></a></p>
<blockquote>
<p><strong>工具简介</strong></p>
</blockquote>
<ul>
<li><strong>ossutil</strong>：主要是通过<strong>命令行</strong>的方式管理OSS数据，需对linux有基础的了解</li>
<li><strong>ossbrowser</strong>：是OSS<strong>图形化管理工具</strong>，通过可视化操作，类似Windows资源管理器的功能</li>
<li><strong>ossfs</strong>：可以将对象存储OSS的存储空间（Bucket）<strong>挂载到本地文件系统</strong>中，像操作本地文件一样操作OSS的对象（Object），实现数据的共享</li>
<li><strong>ossimport</strong>：<strong>数据迁移工具</strong>，可以将本地或其它云存储的数据迁移到OSS</li>
</ul>
<p>注意：在使用SDK或工具时，需要配置访问域名（Endpoint）和访问密钥（Accesskey）</p>
<h2 id="文件存储NAS"><a href="#文件存储NAS" class="headerlink" title="文件存储NAS"></a>文件存储NAS</h2><h3 id="基础概念-1"><a href="#基础概念-1" class="headerlink" title="基础概念"></a>基础概念</h3><blockquote>
<p><strong>地域</strong></p>
</blockquote>
<p>数据中心所在的物理位置，创建文件系统时指定，创建成功后不能更换地域，可以对同地域、跨地域或线下IDC的计算节点进行挂载访问。</p>
<blockquote>
<p><strong>可用区</strong></p>
</blockquote>
<p>在同一地域内，电力和网络互相独立的物理区域。在创建文件系统时指定。</p>
<blockquote>
<p><strong>专有网络VPC</strong></p>
</blockquote>
<p>一种虚拟私有网络，VPC之间相互隔离，可以使用云企业网连通，拥有一个网络环境是计算节点访问NAS文件系统所需的前提条件。</p>
<blockquote>
<p><strong>文件系统</strong></p>
</blockquote>
<p>存储文件的地方，<strong>通过计算节点挂载访问</strong>。以传统的目录树形式管理文件的数据和元数据。支持数百个计算节点同时访问。</p>
<blockquote>
<p><strong>挂载点</strong></p>
</blockquote>
<p>NAS文件系统在网络环境中的连接点，<strong>以域名形式出现</strong>，用以实现数据的传输。</p>
<blockquote>
<p><strong>挂载</strong></p>
</blockquote>
<p><strong>将计算节点与NAS文件系统相连接的操作</strong>。完成挂载后，计算节点可以访问NAS文件系统中的数据。</p>
<p><a href="/../pic/p175686.jpg" title="img" class="gallery-item" style="box-shadow: none;"> <img src="/../pic/p175686.jpg" alt="img"></a></p>
<blockquote>
<p><strong>产品规格</strong></p>
</blockquote>
<p>NAS提供了<strong>通用型</strong>、<strong>极速型</strong>、<strong>文件存储CPFS</strong>等存储类型，可以根据自身业务负载和使用场景选择合适的存储类型。</p>
<p>通用型NAS支持数据生命周期管理，开启生命周期管理后，可以根据其配置策略（如距最近访问14天以上）超过14天未访问的数据会自动实现以文件粒度的冷数据沉降到低频介质，以降低存储成本。</p>
<ul>
<li>通用容量型：适用成本敏感的文件共享业务</li>
<li>通用性能型：适用时延敏感的文件共享业务</li>
<li>极速型：时延敏感的企业在线服务</li>
<li>CPFS：高端，适用高吞吐、高IOPS、海量文件的IO密集型业务。</li>
<li>CPFS智算版：更高端，适用AIGC、自动驾驶等智算场景</li>
</ul>
<blockquote>
<p><strong>权限组</strong></p>
</blockquote>
<p>用于配置通过<strong>不同挂载点访问文件系统的权限信息</strong>，包括授权IP地址、读写操作权限等。</p>
<ul>
<li>一个挂载点必须绑定且只能绑定一个权限组</li>
<li>一个权限组可以被多个挂载点绑定</li>
<li>默认权限组不允许编辑修改</li>
</ul>
<blockquote>
<p><strong>NFS协议</strong></p>
</blockquote>
<p>计算节点挂载访问NAS文件系统时所使用的一种软件协议，<strong>Linux计算实例推荐选择NFS协议</strong></p>
<blockquote>
<p><strong>SMB协议</strong></p>
</blockquote>
<p>计算节点挂载访问NAS文件系统时所使用的一种软件协议，<strong>Windows计算实例推荐选择SMB协议</strong></p>
<blockquote>
<p><strong>POSIX接口</strong></p>
</blockquote>
<p>Linux操作系统用来访问文件的一套<strong>标准接口</strong>，可在应用程序中使用编程语言调用，实现对文件的各种操作</p>
<h3 id="NAS使用流程"><a href="#NAS使用流程" class="headerlink" title="NAS使用流程"></a>NAS使用流程</h3><p><a href="/../pic/3106c26b-89be-4868-af7b-ae6591f9d03c.jpg" title="img" class="gallery-item" style="box-shadow: none;"> <img src="/../pic/3106c26b-89be-4868-af7b-ae6591f9d03c.jpg" alt="img"></a></p>
<p>以下是使用NAS的初始化流程步骤：</p>
<ol>
<li>首先通过登陆阿里云控制台找到NAS服务，查看是否已<strong>开通NAS服务</strong></li>
<li>开通NAS服务之后即可<strong>创建文件系统</strong>，在创建文件系统时可根据自身业务负载和场景需求选择地域、可用区、产品规格、协议类型（NFS、SMB）、vpc、回收站是否开通、生命周期管理等配置信息。</li>
<li>添加挂载点前，可以先<strong>创建权限组和规则</strong>（白名单机制，对不同的ip和网段授予不同访问权限），需注意默认权限组不允许修改编辑</li>
<li>文件系统创建完成之后，通过<strong>添加挂载点</strong>，然后完成文件系统挂载（使用ECS挂载、容器挂载、其它挂载场景），可通过控制台一键挂载、命令行挂载等<ul>
<li>通用型NAS最多可以配置两个挂载点，极速型NAS只能配置一个挂载点</li>
<li>一个网络环境中仅需要一个挂载点即可被同网络环境下的数百个计算节点同时使用</li>
</ul>
</li>
<li>文件系统挂载完成之后，可<strong>查询其挂载状态</strong>，对文件系统进行<strong>读写操作</strong>、也可将本地文件或其它存储设备上的文件<strong>迁移至文件系统</strong></li>
<li>若后续不在需要使用文件系统且文件系统中数据已废弃时，可以<strong>卸载文件系统</strong></li>
</ol>
<h2 id="云存储管理与优化"><a href="#云存储管理与优化" class="headerlink" title="云存储管理与优化"></a>云存储管理与优化</h2><h3 id="OSS权限控制"><a href="#OSS权限控制" class="headerlink" title="OSS权限控制"></a>OSS权限控制</h3><p><strong>OSS有以下四种类型的访问权限控制</strong></p>
<table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>RAM Policy</td>
<td><strong>RAM Policy是基于用户的授权策略</strong>。通过设置RAM Policy，可以集中管理用户（比如员工、系统或应用程序），以及控制用户可以访问名下哪些资源的权限，比如限制您的用户只拥有对某一个Bucket的读权限。</td>
</tr>
<tr>
<td>Bucket ACL</td>
<td><strong>Bucket ACL是基于整个Bucket的授权策略</strong>，该操作只有Bucket的拥有者可以执行。Bucket ACL分为public-read-write（公共读写）、public-read（公共读）和private（私有）三种。</td>
</tr>
<tr>
<td>Bucket Policy</td>
<td><strong>Bucket Policy是基于Bucket中的资源的授权策略</strong>。Bucket Policy可以在控制台直接进行图形化配置，支持对整个Bucket或者某个目录进行授权，支持向其他账号的RAM用户授予访问权限，以及向匿名用户带特定IP条件以及访问方式限制的访问权限。</td>
</tr>
<tr>
<td>Object ACL</td>
<td><strong>Object ACL是基于Object的授权策略</strong>。Object ACL可以继承Bucket ACL，也可以单独设置public-read-write（公共读写）、public-read（公共读）和private（私有）。</td>
</tr>
</tbody></table>
<p><strong>操作步骤</strong>：</p>
<blockquote>
<p><strong>RAM Policy</strong></p>
</blockquote>
<ol>
<li><p>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">RAM管理控制台</a>。</p>
</li>
<li><p>左侧导航栏，选择<strong>身份管理&gt;用户&gt;创建用户</strong>。填写<strong>登录名称</strong>、<strong>访问方式</strong>，勾选<strong>控制台访问</strong>，点击<strong>确定</strong>，完成子账号创建。</p>
</li>
<li><p>在左侧导航栏，选择<strong>身份管理&gt;用户</strong>，选择上一步创建的用户，单击添加权限。</p>
<p>授权范围选择整个云账号。</p>
<p>授权主体，选择选择上一步创建的用户。</p>
<p>选择权限，单击<strong>系统策略</strong>，选择合适的权限。</p>
<p>点击<strong>确定</strong>，完成子账号授权。</p>
</li>
</ol>
<blockquote>
<p><strong>Bucket ACL 和 Bucket Policy</strong></p>
</blockquote>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</li>
<li>单击<strong>Bucket 列表</strong>，然后单击目标Bucket名称。在左侧导航栏的<strong>权限控制</strong>部分，选择<strong>读写权限</strong>或<strong>Bucket 授权策略</strong>。</li>
<li>Bucket ACL比较简单，Bucket Policy还需要新增授权，配置各项参数。点击<strong>确定</strong>。</li>
</ol>
<blockquote>
<p><strong>Object ACL</strong></p>
</blockquote>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</li>
<li>单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。在左侧导航栏，选择<strong>文件管理 &gt; 文件列表</strong>。</li>
<li>在目标文件右侧的操作栏下，单击<strong>详情</strong>，然后单击<strong>设置读写权限</strong>。按实际需求设置读写权限。单击<strong>确定</strong>。</li>
</ol>
<h3 id="OSS数据安全"><a href="#OSS数据安全" class="headerlink" title="OSS数据安全"></a>OSS数据安全</h3><blockquote>
<p><strong>数据加密</strong></p>
</blockquote>
<p>对上传到OSS中的文件进行加密是一种很好的保证数据安全的方式。OSS支持客户端加密和服务器端加密，客户端加密是指将文件（Object）发送到对象存储OSS之前在本地进行加密，如果维护不当导致主密钥用错或丢失，会导致加密数据无法解密。因此不推荐客户端加密方式。</p>
<p>服务器端加密是指<strong>在存储空间（Bucket）上传文件（Object）时</strong>，<strong>OSS会对收到的文件进行加密</strong>，<strong>再将得到的加密文件持久化保存</strong>。当用户通过<strong>GetObject请求下载文件时，OSS自动将加密文件解密后返回给用户</strong>，并在响应头中返回<strong>x-oss-server-side-encryption</strong>，用于声明该文件进行了服务器端加密。</p>
<p>服务器端加密支持<strong>KMS托管密钥</strong>和<strong>OSS完全托管密钥</strong>两种方式，本次介绍后者的使用步骤。</p>
<p><strong>操作步骤</strong>：</p>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</li>
<li>单击<strong>Bucket列表</strong>，然后单击目标Bucket。在左侧导航栏，选择<strong>数据安全 &gt; 服务器端加密</strong>，点击<strong>设置</strong>。</li>
<li>选择<strong>OSS完全托管</strong>，然后选择一种<strong>加密算法</strong>（可选AES256或SM4），单击确定。</li>
</ol>
<p>注意：在新创建Bucket时也可以进行加密配置。</p>
<blockquote>
<p><strong>跨域设置</strong></p>
</blockquote>
<p>跨域访问是浏览器出于安全考虑而设置的一个限制，即同源策略，如果缺少了同源策略，浏览器很容易受到XSS、CSRF等攻击。同源基于”协议+域名+端口”三者相同，即便两个不同的域名指向同一个ip地址，也非同源。</p>
<p><strong>操作步骤</strong>：</p>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</li>
<li>单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。在左侧导航栏，选择<strong>数据安全 &gt; 跨域设置</strong>。</li>
<li>在<strong>跨域设置</strong>页面，单击<strong>创建规则</strong>。按说明设置配置跨域规则。单击<strong>确定</strong>。</li>
</ol>
<blockquote>
<p><strong>防盗链</strong></p>
</blockquote>
<p>防止其它网站盗用企业门户网站静态资源。</p>
<p><strong>操作步骤</strong>：</p>
<ol>
<li><p>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</p>
</li>
<li><p>单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。在左侧导航栏，选择<strong>数据安全 &gt; 防盗链</strong>。</p>
</li>
<li><p>在<strong>防盗链</strong>页面，打开<strong>防盗链</strong>开关。按照如下设置后，单击<strong>保存</strong>。</p>
<p>在<strong>Referer</strong>输入框中，填写门户网站的<strong>域名或IP地址</strong></p>
<p>在<strong>空Referer</strong>区域，设置为<strong>允许</strong></p>
<p>在截断<strong>QueryString</strong>区域，设置为<strong>允许</strong></p>
</li>
</ol>
<blockquote>
<p><strong>版本控制</strong></p>
</blockquote>
<p>OSS提供的<strong>版本控制</strong>是针对存储空间（Bucket）级别的数据保护功能。开启版本控制后，<strong>针对数据的覆盖和删除操作将会以历史版本的形式保存下来</strong>。在错误覆盖或者删除对象（Object）后，能够将Bucket中存储的Object恢复至任意时刻的历史版本。</p>
<p><strong>操作步骤</strong>：</p>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</li>
<li>单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。在左侧导航栏，选择<strong>数据安全 &gt; 版本控制</strong>。</li>
<li>在<strong>版本控制</strong>页面，单击<strong>开启</strong>或<strong>暂停</strong>。在弹出的对话框，单击<strong>确定</strong>。</li>
</ol>
<p><strong>如何恢复历史版本？</strong></p>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</li>
<li>单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。在左侧导航栏，单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。</li>
<li>选择<strong>文件管理 &gt; 文件列表</strong>。单击<strong>历史版本</strong>右侧的<strong>显示</strong>。</li>
<li>选中待恢复文件，然后单击页面下方的<strong>恢复</strong>。在弹出的对话框，单击<strong>确定</strong>。</li>
</ol>
<blockquote>
<p><strong>NAS回收站</strong></p>
</blockquote>
<p>文件存储NAS中，也有类似功能可以实现对误删除文件的数据保护：NAS回收站</p>
<p><strong>操作步骤</strong>：</p>
<ol>
<li>登录<a target="_blank" rel="noopener" href="https://nasnext.console.aliyun.com/">NAS控制台</a>。</li>
<li>在左侧导航栏，选择<strong>文件系统&gt;文件系统列表</strong>。在顶部菜单栏，选择地域。在<strong>文件系统列表</strong>页面，单击目标文件系统名称。</li>
<li>在文件系统详情页，选择<strong>回收站</strong>页签，单击<strong>开启回收站</strong>。在<strong>开启回收站</strong>对话框，选择<strong>文件保留时间</strong>天数。单击<strong>确定</strong>。</li>
</ol>
<h3 id="静态网站托管"><a href="#静态网站托管" class="headerlink" title="静态网站托管"></a>静态网站托管</h3><blockquote>
<p><strong>动态网站和静态网站</strong></p>
</blockquote>
<p>动态网站和静态网站的区别不是网页上是否具有动画，动态网站的含义是网站内容的动态化。</p>
<p>动态网站的过程是：客户端浏览器通过HTTP请求服务器端的网站，网站服务器将请求转给动态网站服务器组件。动态网站服务器运行服务器网站程序,与数据库服务器交互查询或存储数据库中的网站内容，然后产生静态的网站内容，发送回浏览器进行呈现可以看到。</p>
<p>静态网站是指所有的网页都由静态内容构成，面对客户端的请求，直接返回静态内容，只需要通过浏览器进行解析即可。</p>
<p><strong>如果网站内容大部分都是高频访问的静态资源，比如企业的门户网站，那么可以通过OSS Bucket完成门户模块的静态网站托管，服务器只需要编译运行动态文件，动静分离可以大大降低网站服务器的负载，提高网站的访问速度。</strong></p>
<blockquote>
<p><strong>子目录首页</strong></p>
</blockquote>
<p>查看目标Bucket时，可以看到之前上传的文件和创建的文件夹，<strong>文件夹即为子目录</strong>，以Bucket文件结构如下为示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Bucket </span><br><span class="line">	├── index.html   	# 网站首页入口文件</span><br><span class="line">	├── 404.html </span><br><span class="line">	└── news/			# 新闻菜单         </span><br><span class="line">		├── index.html    # 新闻菜单入口文件  </span><br><span class="line">		├── news1.html            </span><br><span class="line">		└── news2.html</span><br></pre></td></tr></table></figure>

<p>Bucket 的首页默认是根目录下的<code>index.html</code>，直接访问OSS域名的根目录将会返回根目录下的<code>index.html</code>文件。如果未开通子目录首页，那么访问OSS域名下的<code>news/</code>子目录，默认也会返回根目录下的<code>index.html</code>文件，而不是<code>news/</code>子目录下的<code>index.html</code>文件，这显然不符合静态网站的访问逻辑。<strong>需要开启子目录首页功能</strong>，使得访问OSS的<code>news/</code>子目录时，返回<code>news/</code>子目录下的<code>index.html</code>文件。</p>
<p><strong>操作步骤</strong>：</p>
<ol>
<li><p>登录<a target="_blank" rel="noopener" href="https://oss.console.aliyun.com/">OSS管理控制台</a>。</p>
</li>
<li><p>单击<strong>Bucket列表</strong>，然后单击目标Bucket名称。在左侧导航栏，选择<strong>数据管理 &gt; 静态页面</strong>。</p>
</li>
<li><p>在<strong>静态页面</strong>，单击<strong>设置</strong>，按如下说明配置各项参数后，单击<strong>保存</strong>。</p>
<p><strong>默认首页：</strong>默认首页是通过浏览器访问静态网站域名时，OSS返回的网站首页。此处设置为<code>index.html</code>。</p>
<p><strong>子目录首页</strong>：选择开通。开通子目录首页后，访问静态网站根域名时，返回根目录默认首页。访问根域名下以正斜线（&#x2F;）结尾的URL时会返回对应目录的默认首页。</p>
<p><strong>文件404规则</strong>：开通子目录首页后，通过文件404规则决定访问不存在的Object时的返回结果。</p>
<p><strong>默认404页</strong>：访问Bucket内文件出现404错误时，OSS返回的错误页面。默认404页仅支持根目录下的文件。此处设置为error.html。</p>
<p><strong>错误文档响应码</strong>：您可以配置返回错误文档时的HTTP响应码为404或200。</p>
</li>
</ol>
<h3 id="OSS成本优化"><a href="#OSS成本优化" class="headerlink" title="OSS成本优化"></a>OSS成本优化</h3><ol>
<li>定期删除无需长期保存的数据</li>
<li>通过生命周期管理和存储类型转换实现OSS成本优化</li>
</ol>
<h3 id="OSS性能优化"><a href="#OSS性能优化" class="headerlink" title="OSS性能优化"></a>OSS性能优化</h3><ol>
<li>地域因素（建议在同一地域创建Bucket和ECS）</li>
<li>合理设计文件名称前缀（避免出现热点分区）</li>
<li>调整并发请求数（获取最均衡的速度和可靠性）</li>
<li>配置超时退避重试策略</li>
<li>CDN加速</li>
<li>OSS传输加速</li>
</ol>
</div><script src="https://jsd.cdn.zzko.cn/npm/hexo-theme-a4@latest/source/js/lightgallery.min.js"></script><script>if("undefined"!=typeof lightGallery) {
        var options1 = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1);
        }</script>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2024-01-03</span>
            
                <span>该篇文章被 邓胖胖</span>
            
            
                <span>打上标签:
                    
                    
                        <a href='/tags/%E9%98%BF%E9%87%8C%E4%BA%91/'>
                            阿里云
                        </a>
                    
                </span>
             
             
                <span>归为分类:
                    
                    
                        <a href='/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/'>
                            学习笔记
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    <!-- <div class="post-footer-pre-next">
        <span>上一篇：<a href=""></a></span>
        <span class="post-footer-pre-next-last-span-right">上一篇：<a href=""></a></span>
    </div> -->

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
    
</div>
<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery.min.js"></script>



                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>